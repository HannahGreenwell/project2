<%# This code is just for the drawer - the mouse event handlers that draw on the canvas %>
<script src="/leap.js"></script>

<script>
  $(document).ready(function() {

    // mouse down draws a single circle and sets last known x,y pos as the clicked pos
    $('#canvasElement').mousedown(event => {
      const xPos = event.pageX;
      const yPos = event.pageY;

      canvasApp.setPosition(xPos, yPos);
      canvasApp.drawOnClick();

      App.games.perform('drawer_clicked', {event: 'click', position: {xPos: xPos, yPos: yPos}});
    });

    // mouse enter sets last known x,y pos as the entered pos
    $('#canvasElement').mouseenter(event => {
      const xPos = event.pageX;
      const yPos = event.pageY;

      canvasApp.setPosition(xPos, yPos);

      App.games.perform('drawer_entered', {event: 'mouseenter', position: {xPos: xPos, yPos: yPos}});
    });

    // on mouse move draws a line from last known x,y to new x,y pos set in the drawOnMove function
    $('#canvasElement').mousemove(event => {
      const userInput = event.which;
      const xPos = event.pageX;
      const yPos = event.pageY;

      canvasApp.drawOnMove(userInput, xPos, yPos);

      if(userInput === 1){
        App.games.perform('drawer_moved', {event: 'mousemove', position: {xPos: xPos, yPos: yPos}, userInput: userInput});
      }
    });

    $('.clearButton').on('click', function() {
      canvasApp.clearCanvas();

    App.games.perform('clear_canvas', {clear: true});
   });

   $('body').append("<div id='cursor'></div>")

});
</script>
